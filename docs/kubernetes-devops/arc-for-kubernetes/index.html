<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-172450760-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-172450760-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-172450760-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Azure Sales Demo Kit" href="/demokit/opensearch.xml"><title data-react-helmet="true">Arc for Kubernetes | Azure Sales Demo Kit</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Arc for Kubernetes | Azure Sales Demo Kit"><meta data-react-helmet="true" name="description" content="Arc for Kubernetes Demo Scenarios"><meta data-react-helmet="true" property="og:description" content="Arc for Kubernetes Demo Scenarios"><meta data-react-helmet="true" property="og:url" content="https://azure.github.io//demokit/docs/kubernetes-devops/arc-for-kubernetes"><link data-react-helmet="true" rel="shortcut icon" href="/demokit/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://azure.github.io//demokit/docs/kubernetes-devops/arc-for-kubernetes"><link rel="stylesheet" href="/demokit/styles.3bae52e5.css">
<link rel="preload" href="/demokit/styles.e0db7752.js" as="script">
<link rel="preload" href="/demokit/runtime~main.f22f383c.js" as="script">
<link rel="preload" href="/demokit/main.dec57bc4.js" as="script">
<link rel="preload" href="/demokit/1.15109c32.js" as="script">
<link rel="preload" href="/demokit/2.65fcd1f4.js" as="script">
<link rel="preload" href="/demokit/20.3d98eddf.js" as="script">
<link rel="preload" href="/demokit/21.ed44d8c3.js" as="script">
<link rel="preload" href="/demokit/8f5690b9.4da2d76c.js" as="script">
<link rel="preload" href="/demokit/17896441.3b27b602.js" as="script">
<link rel="preload" href="/demokit/d97edba6.9c4f639b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/demokit/"><img class="navbar__logo" src="/demokit/img/logo.svg" alt="Azure Sales Demo Kit"><strong class="navbar__title">Azure Sales Demo Kit</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/demokit/docs/welcome">Demo Kit</a><a href="https://github.com/azure/demokit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="mailto:demokit@microsoft.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact Us</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/demokit/"><img class="navbar__logo" src="/demokit/img/logo.svg" alt="Azure Sales Demo Kit"><strong class="navbar__title">Azure Sales Demo Kit</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/demokit/docs/welcome">Demo Kit</a></li><li class="menu__list-item"><a href="https://github.com/azure/demokit" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="mailto:demokit@microsoft.com" target="_blank" rel="noopener noreferrer" class="menu__link">Contact Us</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/demokit/docs/welcome">Welcome</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Kubernetes DevOps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/demokit/docs/kubernetes-devops/index">Kubernetes DevOps Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/demokit/docs/kubernetes-devops/arc-for-kubernetes">Arc for Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/demokit/docs/kubernetes-devops/github">Github Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/demokit/docs/kubernetes-devops/devops">Azure DevOps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/demokit/docs/kubernetes-devops/argocd">ArgoCD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Azure Networking</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/demokit/docs/azure-networking/index">Azure Networking Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/demokit/docs/azure-networking/hub-spoke">Azure Networking Hub Spoke</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Arc for Kubernetes</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="arc-for-kubernetes-demo-scenarios"></a>Arc for Kubernetes Demo Scenarios<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arc-for-kubernetes-demo-scenarios" title="Direct link to heading">#</a></h2><p>Arc for Kubernetes contains below demos</p><ul><li>GitOps demo, by leveraging github and Arc for Kubernetes shows how to deploy your packages to AKS cluster.</li><li>Kubernetes cluster monitoring demo, shows how to monitor Kubernetes cluster from on-premises or from other cloud provider.</li><li>Azure Kubernetes policy demo, shows how to apply policy controls on Arc managed Kubernetes cluster.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="gitops-demo"></a>GitOps Demo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#gitops-demo" title="Direct link to heading">#</a></h2><ol><li><p>Click this <a href="https://ms.portal.azure.com/?feature.azureArc=true&amp;Microsoft_Azure_ContainerService=flight4&amp;feature.enablearck8smonitoring=true&amp;feature.azureAroV4=true#@microsoft.onmicrosoft.com/resource/subscriptions/513df66c-64b0-4c0b-a13a-7f37bb384aff/resourceGroups/AzureArc/providers/Microsoft.Kubernetes/connectedClusters/K8SARC/overview" target="_blank" rel="nofollow noopener noreferrer">URL</a>, it is an &quot;Arc for Kubernetes&quot; environment shows in Azure portal, you can click each blade and shows how it looks like.</p><img alt="arc-1" src="/demokit/img/kubernetes-devops/arc-1.png"></li><li><p>From browser, open URL <a href="http://vote-arc.k8s.devsecops.ink" target="_blank" rel="nofollow noopener noreferrer">http://vote-arc.k8s.devsecops.ink</a>, this is an application deployed into Arc managed Kubernetes cluster, we will demo how to apply GitOps on this application, currently the application has version v1, highlight the version to your customer at this moment.</p><img alt="arc-2" src="/demokit/img/kubernetes-devops/arc-2.png"></li><li><p>From browser, open <a href="https://github.com/devopsonazure/vote-arc/blob/master/manifests/deployment.yml" target="_blank" rel="nofollow noopener noreferrer">https://github.com/devopsonazure/vote-arc/blob/master/manifests/deployment.yml</a> this is the source project hosted in github, you should be able to edit this file with your own GitHub account. Explain to your customer it is already deployed to Arc managed Kubernetes cluster, you are going to simulate the a deployment by modifying the deployment source, step 1 is clicking the highlighted button, step 2 modifying image from huangyingting/azre-vote-front-arc:v1 to huangyingting/azure-vote-front-arc:v2, or v3, v4, v5.</p><img alt="arc-3" src="/demokit/img/kubernetes-devops/arc-3.png"></li><li><p>Click &quot;Commit changes&quot; button to commit the change.</p><img alt="arc-4" src="/demokit/img/kubernetes-devops/arc-4.png"></li><li><p>It should take 1 – 2 minutes to apply the new change, right now, you could go to webpage opened in step 1, then go to Configurations-&gt;Add configuration, explain to your customer how to deploy an application from &quot;Arc for Kubernetes&quot;, a sample configuration is provided in below screen shot, basically it is related with writing kubernete yaml files or creating helm deployment files, in this demo, we simply use a Kubernetes yaml files, all those yaml files are in <a href="https://github.com/devopsonazure/vote-arc/tree/master/manifests" target="_blank" rel="nofollow noopener noreferrer">https://github.com/devopsonazure/vote-arc/tree/master/manifests</a>, so just explain to your customer how it looks like.</p><img alt="arc-5" src="/demokit/img/kubernetes-devops/arc-5.png"></li><li><p>Open URL <a href="http://vote-arc.k8s.devsecops.ink" target="_blank" rel="nofollow noopener noreferrer">http://vote-arc.k8s.devsecops.ink</a>, refresh it, now it should change to corresponding version.</p><img alt="arc-6" src="/demokit/img/kubernetes-devops/arc-6.png"></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="arc-enabled-cluster-monitoring-demo"></a>Arc Enabled Cluster Monitoring Demo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arc-enabled-cluster-monitoring-demo" title="Direct link to heading">#</a></h2><p>Click this <a href="https://ms.portal.azure.com/?feature.azureArc=true&amp;Microsoft_Azure_ContainerService=flight4&amp;feature.enablearck8smonitoring=true&amp;feature.azureAroV4=true#@microsoft.onmicrosoft.com/resource/subscriptions/513df66c-64b0-4c0b-a13a-7f37bb384aff/resourceGroups/AzureArc/providers/Microsoft.Kubernetes/connectedClusters/K8SARC/overview" target="_blank" rel="nofollow noopener noreferrer">URL</a>, from opened Azure portal, go to Monitoring-&gt;Insights(preview), now you can demo how Arc for Kubernetes monitoring works, click Cluster, Health (Preview), Nodes, Controller and Containers, explain how monitoring looks like in Arc for Kubernetes.
The detailed reference document can be found at <a href="https://docs.microsoft.com/en-us/azure/azure-arc/kubernetes/deploy-azure-monitor-for-containers" target="_blank" rel="nofollow noopener noreferrer">Enable monitoring of Azure Arc enabled Kubernetes cluster</a></p><img alt="arc-7" src="/demokit/img/kubernetes-devops/arc-7.png"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="arc-enabled-cluster-policy-demo"></a>Arc Enabled Cluster Policy Demo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arc-enabled-cluster-policy-demo" title="Direct link to heading">#</a></h2><ol><li><p>Arc for Kubernetes leverages <a href="https://github.com/open-policy-agent/gatekeeper" target="_blank" rel="nofollow noopener noreferrer">gatekeeper</a> to meet governance and legal requirements, the policy definition is integrated into Azure policy itself, to demo how it works, click this <a href="https://ms.portal.azure.com/?feature.azureArc=true&amp;Microsoft_Azure_ContainerService=flight4&amp;feature.enablearck8smonitoring=true&amp;feature.azureAroV4=true#@microsoft.onmicrosoft.com/resource/subscriptions/513df66c-64b0-4c0b-a13a-7f37bb384aff/resourceGroups/AzureArc/providers/Microsoft.Kubernetes/connectedClusters/K8SARC/overview" target="_blank" rel="nofollow noopener noreferrer">URL</a>, then go to Policies, </p><img alt="arc-8" src="/demokit/img/kubernetes-devops/arc-8.png"></li><li><p>Click &quot;[Preview]: Ensure services listen only on allowed ports in Kubernetes cluster&quot; policy, then &quot;Edit assignment&quot;, from opened page, go to &quot;Parameters&quot;, explain to customer current policy assignment only allows port 6379, 80, 11211 and 443, if a deployment tries to create other ports like port 8080, then it will get denied.</p><img alt="arc-9" src="/demokit/img/kubernetes-devops/arc-9.png"></li><li><p>Close &quot;Assignment Details&quot;, then go to &quot;View definition&quot;, it will list policy definition in ARM template, go to constraintTemplate, open the URL, it will reveal how the real policy looks like, it is an OPA constraint template.</p><img alt="arc-10" src="/demokit/img/kubernetes-devops/arc-10.png"></li><li><p>To show how constraint template works, </p></li></ol><ul><li>Visit <a href="https://shell.azure.com" target="_blank" rel="nofollow noopener noreferrer">https://shell.azure.com</a>, choose Bash</li><li>From cloud shell, run <code>git clone https://github.com/devopsonazure/devopsonazure</code></li><li>Type <code>cd devopsonazure</code></li><li>Run <code>kubectl --kubeconfig arcpolicy apply -f https://raw.githubusercontent.com/devopsonazure/vote-arc/master/policy/service-port-not-allowed.yaml -n policy</code>, this command basically tries to deploy a service at 8080, because our policy doesn’t allow port 8080, so it will end with below error<img alt="arc-11" src="/demokit/img/kubernetes-devops/arc-11.png"></li><li>Open <a href="https://raw.githubusercontent.com/devopsonazure/vote-arc/master/policy/service-port-not-allowed.yaml" target="_blank" rel="nofollow noopener noreferrer">https://raw.githubusercontent.com/devopsonazure/vote-arc/master/policy/service-port-not-allowed.yaml</a> to explain the service tries to bind to port 8080. </li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/azure/demokit/edit/master/docs/kubernetes-devops/arc-for-kubernetes.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/demokit/docs/kubernetes-devops/index"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Kubernetes DevOps Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/demokit/docs/kubernetes-devops/github"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Github Actions »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#arc-for-kubernetes-demo-scenarios" class="table-of-contents__link">Arc for Kubernetes Demo Scenarios</a></li><li><a href="#gitops-demo" class="table-of-contents__link">GitOps Demo</a></li><li><a href="#arc-enabled-cluster-monitoring-demo" class="table-of-contents__link">Arc Enabled Cluster Monitoring Demo</a></li><li><a href="#arc-enabled-cluster-policy-demo" class="table-of-contents__link">Arc Enabled Cluster Policy Demo</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Demos</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/demokit/docs/kubernetes-devops/docs/kubernetes-devops/index">Kubernetes DevOps</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/demokit/docs/kubernetes-devops/docs/azure-networking/index">Azure Networking</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://teams.microsoft.com/l/team/19%3a97f9e0c1df4749768074c8d1c3e3bf69%40thread.tacv2/conversations?groupId=59b14dcc-815c-413a-89b0-49a4228b1705&amp;tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join Us</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/azure/demokit/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Demo Kit Team.</div></div></div></footer></div>
<script src="/demokit/styles.e0db7752.js"></script>
<script src="/demokit/runtime~main.f22f383c.js"></script>
<script src="/demokit/main.dec57bc4.js"></script>
<script src="/demokit/1.15109c32.js"></script>
<script src="/demokit/2.65fcd1f4.js"></script>
<script src="/demokit/20.3d98eddf.js"></script>
<script src="/demokit/21.ed44d8c3.js"></script>
<script src="/demokit/8f5690b9.4da2d76c.js"></script>
<script src="/demokit/17896441.3b27b602.js"></script>
<script src="/demokit/d97edba6.9c4f639b.js"></script>
</body>
</html>